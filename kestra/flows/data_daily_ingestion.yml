id: data_daily_ingestion
namespace: dev

inputs:
  - id: date
    type: DATE
    defaults: "2019-10-01"

variables:
  month: '{{inputs.date | date("yyyy-MMM") }}'
  day_of_month: '{{inputs.date| date("dd") }}'

tasks:
  - id: log
    type: io.kestra.plugin.core.log.Log
    message: "Hello at {{render(vars.day_of_month)}} of {{render(vars.month)}}"

  - id: extract
    type: io.kestra.plugin.gcp.gcs.Download
    




pluginDefaults:
  - type: io.kestra.plugin.gcp
    values:
      serviceAccount: "{{kv('GCP_CREDENTIALS')}}"
      projectId: "{{kv('GCP_PROJECT_ID')}}"
      location: "{{kv('GCP_LOCATION')}}"
      bucket: "{{kv('GCP_BUCKET_URL')}}"